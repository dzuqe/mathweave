<!DOCTYPE html>
<html>
  <head>
    <title>History</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/code.css">
  </head>
  <body>
    <div id="page">
      <div id="message"></div>
      <div id="history"></div>
    </div>
    <script src="https://unpkg.com/arweave/bundles/web.bundle.js"></script>
    <script>
      if (localStorage.getItem("address")!== null) {
        console.log('got the wallet!');
        const address = localStorage.getItem('address');
        document.getElementById('message').innerHTML = '<h1>History</h1>';

        (async () => {
        
          const arweave = Arweave.init({
            host: "arweave.net",
            port: 443,
            protocol: "https",
            timeout: 20000,
            logging: false
          });


          const txids = await arweave.arql({
            op: "and",
            expr1: {
              op: "equals",
              expr1: "from",
              expr2: address,
            },
            expr2: {
              op: 'equals',
              expr1: 'arweaveapp',
              expr2: 'arweavemathrepl',
            }
          });

          console.log('TXIDS: ', txids);
        })();

      } else {
        console.log('no wallet!');
        document.getElementById('message').innerHTML = '<h1>You need to upload your keyfile first.<br/> <a href="/">Home</a>'
      }
    </script>
  </body>
</html>
